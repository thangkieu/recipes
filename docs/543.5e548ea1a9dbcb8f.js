"use strict";(self.webpackChunkudemy_recipe=self.webpackChunkudemy_recipe||[]).push([[543],{6543:(B,f,s)=>{s.r(f),s.d(f,{RecipeModule:()=>E});var d=s(6019),a=s(7537),e=s(3668),u=s(4753),Z=s(1e3),b=s(4522);let g=(()=>{class i{constructor(t,n){this.firestore=t,this.http=n,this.activeRecipeChanged=new e.vpe,this.recipeCollection=this.firestore.collection("recipes")}ngOnInit(){}getRecipes(){return this.recipeCollection.get().pipe((0,u.U)(t=>t.docs)).pipe((0,u.U)(t=>t.map(n=>Object.assign(Object.assign({},n.data()),{id:n.id}))))}addNewRecipe(t){return this.recipeCollection.add(t)}update(t,n){return this.recipeCollection.doc(t).update(n)}setActiveRecipe(t){this.activeRecipe=t,this.activeRecipeChanged.emit()}removeRecipe(t){return this.recipeCollection.doc(t).delete()}getRecipe(t){return this.recipeCollection.doc(t).get().pipe((0,u.U)(n=>n.data()))}httpGetRecipes(){return this.http.get("/recipes")}httpAddNewRecipes(t){return this.http.post("/recipes",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Z.ST),e.LFG(b.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var m=s(3339);let x=(()=>{class i{constructor(t,n){this.service=t,this.loadingService=n}resolve(t){const n=t.paramMap.get("id");return this.loadingService.toggle(!0),n?this.service.getRecipe(n):Promise.reject()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(g),e.LFG(m.b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var p=s(1002),T=s(259),_=s(7524);function R(i,o){if(1&i&&(e.TgZ(0,"div",17),e._UZ(1,"img",18),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("src",t.data.photoUrl,e.LSH),e.s9C("alt",t.data.name)}}function A(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",19),e.NdJ("click",function(r){return e.CHM(t),e.oxw(2).remove(r)}),e._UZ(2,"span",20),e._uU(3," Delete Recepie"),e.qZA(),e.TgZ(4,"a",21),e._UZ(5,"span",22),e._uU(6," Edit Recipe"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.MGl("routerLink","/",t.recipeId,"/edit")}}function C(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"input",24),e.NdJ("change",function(r){return e.CHM(t),e.oxw(2).onToggleIngredient(r)}),e.qZA(),e.TgZ(3,"label",25),e._uU(4),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit,n=o.index,r=e.oxw(2);e.xp6(2),e.hYB("id","checkbox-",n,"-",t,""),e.Q6J("value",t)("checked",r.checkedItems.includes(t)),e.xp6(1),e.hYB("for","checkbox-",n,"-",t,""),e.xp6(1),e.Oqu(t)}}function y(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6),e.YNc(2,R,2,2,"div",7),e.TgZ(3,"div",8),e.TgZ(4,"h1",9),e.TgZ(5,"span",10),e._uU(6),e.qZA(),e.YNc(7,A,7,1,"ng-container",11),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",12),e._uU(10),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"h4",13),e._uU(13,"Ingredients"),e.qZA(),e.YNc(14,C,5,7,"ng-container",14),e.TgZ(15,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().addIngredients()}),e._UZ(16,"span",16),e._uU(17," Add to Shopping List "),e.qZA(),e.qZA(),e.qZA(),e._UZ(18,"hr"),e.TgZ(19,"h4",13),e._uU(20,"Directions"),e.qZA(),e.TgZ(21,"div",12),e._uU(22),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.data.photoUrl),e.xp6(4),e.Oqu(t.data.name),e.xp6(1),e.Q6J("ngIf",e.lcZ(8,6,t.isLoggedIn)),e.xp6(3),e.Oqu(t.data.description),e.xp6(4),e.Q6J("ngForOf",t.data.ingredients),e.xp6(8),e.Oqu(t.data.directions)}}function I(i,o){1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"h2"),e._uU(2,"Recipe not found."),e.qZA(),e.TgZ(3,"a",27),e._uU(4,"Browser more recipes."),e.qZA(),e.qZA())}let U=(()=>{class i{constructor(t,n,r,c,l,h){this.router=t,this.recipeService=n,this.activeRoute=r,this.shoppingListService=c,this.userService=l,this.loadingService=h,this.recipeId=r.snapshot.paramMap.get("id")||""}ngOnInit(){this.isLoggedIn=this.userService.isAuthenticated(),this.subscription=this.activeRoute.data.subscribe(t=>{this.data=t.data,this.loadingService.toggle(!1),this.checkedItems=this.data.ingredients})}ngOnDestroy(){this.subscription.unsubscribe()}remove(t){t.preventDefault(),this.recipeService.removeRecipe(this.recipeId).then(()=>{this.router.navigate(["/"])})}addIngredients(){this.shoppingListService.add(this.checkedItems)}onToggleIngredient(t){const n=t.target,{checked:r,value:c}=n;r?this.checkedItems.push(c):this.checkedItems=this.checkedItems.filter(l=>l!==c)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(g),e.Y36(p.gz),e.Y36(T._),e.Y36(_.K),e.Y36(m.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-detail"]],decls:8,vars:2,consts:[[1,"container","pt-3","pb-3","background"],["routerLink","/",1,"btn","btn-link","ps-0","text-decoration-none"],[1,"ti-arrow-left"],[1,"card","rounded-0"],[4,"ngIf","ngIfElse"],["noData",""],[1,"d-md-flex","mb-3","align-items-start","gap-3"],["class","recipe-img",4,"ngIf"],[1,"mt-3","mt-md-0","flex-grow-1"],[1,"d-flex","align-items-end"],[1,"me-auto"],[4,"ngIf"],[1,"pre-text"],[1,"mb-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"ti-plus"],[1,"recipe-img"],[1,"img-responsive",3,"src","alt"],[1,"btn","btn-outline-danger","btn-sm","me-2","flex-shrink-0","btn-action",3,"click"],[1,"ti-trash"],[1,"btn","btn-outline-secondary","btn-sm","flex-shrink-0","btn-action",3,"routerLink"],[1,"ti-pencil"],[1,"mb-2","form-check"],["type","checkbox",1,"form-check-input",3,"value","checked","id","change"],[1,"form-check-label",3,"for"],[1,"text-center","mt-5"],["routerLink","/recipes"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e._UZ(2,"span",2),e._uU(3," Back "),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,y,23,8,"ng-container",4),e.YNc(6,I,5,0,"ng-template",null,5,e.W1O),e.qZA(),e.qZA()),2&t){const r=e.MAs(7);e.xp6(5),e.Q6J("ngIf",n.data)("ngIfElse",r)}},directives:[p.rH,d.O5,d.sg,p.yS],pipes:[d.Ov],styles:[".pre-text[_ngcontent-%COMP%]{white-space:break-spaces}.card[_ngcontent-%COMP%]{padding:2rem}.recipe-img[_ngcontent-%COMP%]{max-width:230px}"]}),i})();var q=s(273);class k{constructor(o,t,n,r,c,l){this.id=o,this.name=t,this.description=n,this.photoUrl=r,this.ingredients=c,this.directions=l}}function S(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24),e.TgZ(2,"div",25),e.TgZ(3,"input",26),e.NdJ("keydown",function(r){return e.CHM(t),e.oxw().onIngredientKeydown(r)})("paste",function(r){return e.CHM(t),e.oxw().onPaste(r)}),e.qZA(),e.TgZ(4,"div",8),e._uU(5,"This field is mandatory"),e.qZA(),e.qZA(),e.TgZ(6,"div"),e.TgZ(7,"button",27),e.NdJ("click",function(){const c=e.CHM(t).index;return e.oxw().remove(c)}),e.ALo(8,"async"),e._UZ(9,"span",28),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=o.index,n=e.oxw();e.xp6(3),e.Q6J("formControlName",t),e.xp6(4),e.Q6J("disabled",e.lcZ(8,2,n.doing))}}let v=(()=>{class i{constructor(t,n,r,c){this.recipeService=t,this.activeRoute=n,this.loadingService=r,this.routeService=c,this.recipe=new k("","","","",[],""),this.fb=new a.qu,this.doing=new q.x,this.done=()=>{this.doing.next(!1),this.routeService.navigate([`/${this.recipeId}`])},this.recipeId=this.activeRoute.snapshot.paramMap.get("id")||"",this.doing.next(!1)}ngOnInit(){this.subscription=this.activeRoute.data.subscribe(t=>{t.data&&(this.recipe=t.data),this.initForm(),this.loadingService.toggle(!1)})}ngOnDestroy(){this.subscription.unsubscribe()}initForm(){this.form=this.fb.group({name:[this.recipe.name,a.kI.required],description:[this.recipe.description],directions:[this.recipe.directions,a.kI.required],photoUrl:[this.recipe.photoUrl],ingredients:this.fb.array(this.recipe.ingredients.map(t=>this.fb.control(t,a.kI.required)))})}submit(){this.doing.next(!0);const t=this.activeRoute.snapshot.paramMap.get("id");t?this.recipeService.update(t,this.form.value).then(this.done).catch(this.done):(this.recipeService.addNewRecipe(this.form.value).then(this.done).catch(this.done),this.recipeService.httpAddNewRecipes(this.form.value).subscribe({next:this.done,error:this.done}))}get ingredients(){return this.form.get("ingredients")}addIngredient(t=""){this.ingredients.push(this.fb.control(t,a.kI.required))}onIngredientKeydown(t){"Enter"===t.key&&(t.preventDefault(),this.addIngredient())}remove(t){this.ingredients.removeAt(t),this.recipe.ingredients.splice(t,1)}onPaste(t){var n;t.preventDefault();const c=((null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text").trim().split("\n"))||[]).map((l,h)=>{const Q=l.trim().replace(/^-\s\[[\s|x]\]\s/g,"");return 0!==h&&this.addIngredient(),Q});this.ingredients.setValue(c)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g),e.Y36(p.gz),e.Y36(m.b),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-edit"]],decls:48,vars:12,consts:[[1,"container","mt-3"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"mb-3"],[1,"card","p-3"],[3,"formGroup","ngSubmit"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name",1,"form-control","form-control-sm"],[1,"invalid-feedback"],["for","photoUrl",1,"form-label"],["type","url","id","photoUrl","formControlName","photoUrl","name","photoUrl",1,"form-control","form-control-sm"],["for","description",1,"form-label"],["id","description","formControlName","description","name","description","rows","2",1,"form-control","form-control-sm"],["for","directions",1,"form-label"],["id","directions","formControlName","directions","name","directions","rows","5",1,"form-control","form-control-sm"],["for","ingredients",1,"form-label"],["formArrayName","ingredients"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"ti-plus"],[1,"mb-3","text-end"],["type","button",1,"btn","btn-default","btn-sm",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],[1,"ti-save"],[1,"d-flex","gap-2","mb-2"],[1,"flex-grow-1"],["type","text","name","ingredientname","placeholder","Ingredient",1,"form-control","form-control-sm",3,"formControlName","keydown","paste"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","click"],[1,"ti-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h4",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(7,"div",3),e.TgZ(8,"label",6),e._uU(9,"Name"),e.qZA(),e._UZ(10,"input",7),e.TgZ(11,"div",8),e._uU(12,"This field is mandatory"),e.qZA(),e.qZA(),e.TgZ(13,"div",3),e.TgZ(14,"label",9),e._uU(15,"Photo Url"),e.qZA(),e._UZ(16,"input",10),e.TgZ(17,"div",8),e._uU(18,"This field is mandatory"),e.qZA(),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"label",11),e._uU(21,"Description"),e.qZA(),e._UZ(22,"textarea",12),e.TgZ(23,"div",8),e._uU(24,"This field is mandatory"),e.qZA(),e.qZA(),e.TgZ(25,"div",3),e.TgZ(26,"label",13),e._uU(27,"Directions"),e.qZA(),e._UZ(28,"textarea",14),e.TgZ(29,"div",8),e._uU(30,"This field is mandatory"),e.qZA(),e.qZA(),e.TgZ(31,"div",3),e.TgZ(32,"label",15),e._uU(33,"Ingredients"),e.qZA(),e.TgZ(34,"div",16),e.YNc(35,S,10,4,"ng-container",17),e.TgZ(36,"button",18),e.NdJ("click",function(){return n.addIngredient()}),e._UZ(37,"span",19),e._uU(38," Add another Ingredient "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",20),e.TgZ(40,"button",21),e._uU(41," Cancel "),e.qZA(),e.TgZ(42,"button",22),e.ALo(43,"async"),e._UZ(44,"span",23),e._uU(45),e.ALo(46,"async"),e.ALo(47,"async"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("",n.recipeId?"Update":"Add"," Recipe"),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(29),e.Q6J("ngForOf",n.ingredients.controls),e.xp6(5),e.MGl("routerLink","/",n.recipeId,""),e.xp6(2),e.Q6J("disabled",!n.form.valid||e.lcZ(43,6,n.doing)),e.xp6(3),e.hij(" ",n.recipeId?e.lcZ(46,8,n.doing)?"Saving...":"Save":e.lcZ(47,10,n.doing)?"Submitting...":"Submit"," "))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.CE,d.sg,p.rH],pipes:[d.Ov],styles:[".form-label[_ngcontent-%COMP%]{font-weight:bold}"]}),i})();const w=function(i){return{backgroundImage:i}};function O(i,o){if(1&i&&e._UZ(0,"div",7),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(1,w,"url(' "+t.data.photoUrl+"')"))}}function L(i,o){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw();e.s9C("alt",t.data.name)}}let F=(()=>{class i{constructor(t){this.recipeService=t}ngOnInit(){}onClick(t){t.preventDefault(),this.recipeService.setActiveRecipe(this.data)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-item"]],inputs:{data:"data"},decls:10,vars:5,consts:[[1,"card"],["class","img-square",3,"ngStyle",4,"ngIf","ngIfElse"],["noImage",""],[1,"card-body","rounded-bottom"],[1,"card-title"],[1,"card-text","text-truncate","mb-0"],[1,"stretched-link",3,"routerLink"],[1,"img-square",3,"ngStyle"],["src","assets/image-placeholder.jpeg",1,"card-img-top",3,"alt"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,O,1,3,"div",1),e.YNc(2,L,1,1,"ng-template",null,2,e.W1O),e.TgZ(4,"div",3),e.TgZ(5,"h5",4),e._uU(6),e.qZA(),e.TgZ(7,"p",5),e._uU(8),e.qZA(),e._UZ(9,"a",6),e.qZA(),e.qZA()),2&t){const r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",n.data.photoUrl)("ngIfElse",r),e.xp6(5),e.Oqu(n.data.name),e.xp6(2),e.Oqu(n.data.description),e.xp6(1),e.MGl("routerLink","/",n.data.id,"")}},directives:[d.O5,p.yS,d.PC],styles:[".card[_ngcontent-%COMP%]{transition:all .3s ease;height:100%;border:0;overflow:hidden;box-shadow:1px 1px #ddd,-1px -1px #ddd,1px -1px #ddd,-1px 1px #ddd}.card[_ngcontent-%COMP%]:hover{box-shadow:0 1rem 3rem #0000002e}.img-square[_ngcontent-%COMP%]{padding-bottom:100%;background-size:cover;background-repeat:no-repeat}"]}),i})();function N(i,o){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"app-recipe-item",3),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("data",t)}}let M=(()=>{class i{constructor(t,n,r){this.loadingService=t,this.activeRoute=n,this.recipesService=r,this.recipes=[]}ngOnInit(){this.recipesService.httpGetRecipes().subscribe(t=>{}),this.loadingService.toggle(!0),this.dataSub=this.recipesService.getRecipes().subscribe(t=>{this.loadingService.toggle(!1),this.recipes=t})}ngOnDestroy(){this.dataSub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.b),e.Y36(p.gz),e.Y36(g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-list"]],decls:2,vars:1,consts:[[1,"row"],["class","col-6 col-md-4 col-lg-3 mb-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","col-lg-3","mb-3"],[3,"data"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,N,2,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.recipes))},directives:[d.sg,F],styles:[""]}),i})();function Y(i,o){1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"button",3),e._UZ(2,"span",4),e._uU(3," New Recipe "),e.qZA(),e.qZA())}const J=[{path:"",component:(()=>{class i{constructor(t){this.userService=t}ngOnInit(){this.isLoggedIn=this.userService.isAuthenticated()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:4,vars:3,consts:[[1,"container","pt-3"],["class","text-end",4,"ngIf"],[1,"text-end"],["routerLink","/add",1,"btn","btn-primary","mb-3","btn-sm"],[1,"ti-plus"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Y,4,0,"div",1),e.ALo(2,"async"),e._UZ(3,"app-recipe-list"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,n.isLoggedIn)))},directives:[d.O5,M,p.rH],pipes:[d.Ov],styles:[""]}),i})()},{path:"add",component:v,pathMatch:"add"},{path:":id",runGuardsAndResolvers:"always",resolve:{data:x},children:[{path:"",component:U},{path:"edit",component:v}]}];let D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.Bz.forChild(J)],p.Bz]}),i})(),E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[d.ez,a.UX,D]]}),i})()}}]);